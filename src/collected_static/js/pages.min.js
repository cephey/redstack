angular.module("PatternApp",["UserApp"]),angular.module("PatternApp").config(["$interpolateProvider","$httpProvider",function(a,b){a.startSymbol("[%"),a.endSymbol("%]"),b.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",b.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),angular.module("PatternApp").controller("PatternFormCtrl",["$scope","$http","UserHandler","PatternHandler",function(a,b,c){a.form=new AngForm(["name","pattern"]),a.generate_name=function(){a.form.fields.name=SiteName.generate()},a.build=function(a){return ImageState.get_blurs(a)},a.active=ImageState.active,a.deactive=ImageState.deactive,a.set_img=function(b){ImageState.set_img(),a.form.fields.pattern=b},a.form.submit=function(d){var e=this.errors,f=this.loader;e.clear(),f.show(),b.defaults.headers.post["X-CSRFToken"]=Cookie.getCookie("csrftoken"),b.post(d,$.param(this.fields)).success(function(a){a.success===!0?c.callback(a):e.show(a)}).error(function(b,f){401===f?c.login(function(){a.form.submit(d)}):e.show()}).finally(function(){f.hide()})}}]),angular.module("PatternApp").factory("PatternHandler",["$http",function(a){var b=function(b,c){var d=Ladda.create(document.querySelector(".btn-submit-pattern"));d.start(),a.defaults.headers.post["X-CSRFToken"]=Cookie.getCookie("csrftoken"),a.post(b,$.param(c)).success(function(a){console.log(a)}).error(function(a){console.log(a)}).then(function(){d.stop()})};return{send_pattern_form:b}}]);