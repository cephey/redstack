function Loader(){this.selector=function(a){for(var b="";b.length<a;)b+=Math.random().toString(36).replace(/\d|_/g,"").slice(2,12);return b.substr(0,a)}(6),this.show=function(){this.loading=Ladda.create(document.querySelector("."+this.selector)),this.loading.start()},this.hide=function(){this.loading.stop()}}function AngForm(a,b,c){this.fields=function(a){var b={};for(var c in a)b[a[c]]="";return b}(a),this.success={message:!1,get:function(){return this.message},set:function(a){this.message=a||!1},clear:function(){this.set()}},this.loader=new Loader,this.errors=function(a,b){var c={__all__:!1,show:function(a){if(a)for(var b in a)this[b]=a[b];else this.__all__=["Ошибка сервера"]},clear:function(){b.clear();for(var a in this)"function"!=typeof this[a]&&(this[a]=!1)}};for(var d in a)c[a[d]]=!1;return c}(a,this.success),this.submit=function(a){var d=this.errors,e=this.success,f=this.loader;this.errors.clear(),this.loader.show(),c.defaults.headers.post["X-CSRFToken"]=Cookie.getCookie("csrftoken"),c.post(a,$.param(this.fields)).success(function(a){a.success===!0?void 0===b?e.set(a.message):b(a):d.show(a.errors)}).error(function(){d.show()}).finally(function(){f.hide()})}}var Cookie=function(){var a=function(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):void 0};return{getCookie:a}}();